name: "Get PR number"
description: "Get pull request number"
inputs:
  branch-name:
    description: name of the branch to get the pr number
    required: true
  github-token:
    description: github token
    required: true
outputs:
  number:
    description: PR number output
    value: ${{steps.pr-number-step.outputs.pr_number}}

runs:
  using: composite
  steps:
    - name: Get PR number
      shell: bash
      id: pr-number-step
      run: |
        BRANCH_NAME=${{ inputs.branch-name }}
        pull_request_number=$(gh pr view $BRANCH_NAME  --json number -q .number || echo "")
        echo "pr_number=$pull_request_number" >> $GITHUB_OUTPUT
      env:
        GITHUB_TOKEN: ${{ inputs.github-token }}

name: slack-file-upload
description: Upload file to slack channel
inputs:
  slack-token:
    description: 'Slack API token'
    required: true
  slack-channel-id:
    description: 'Slack channel ID'
    required: true
  file-path:
    description: 'File to upload'
    required: true
  file-title:
    description: 'Title of file'
runs:
  using: composite
  steps:
    - name: Setup Python
      uses: actions/setup-python@0b93645e9fea7318ecaed2b359559ac225c90a2b # v5.3.0
      with:
        python-version: "3.9"
        cache: pip
    - name: Install requirements via pip
      shell: bash
      run: pip install -r ${{ github.action_path }}/requirements.txt
    - name: Upload ${{ inputs.file-path }} to Slack
      shell: bash
      env:
        SLACK_BOT_TOKEN: ${{ inputs.slack-token }}
        SLACK_CHANNEL_ID: ${{ inputs.slack-channel-id }}
      run: python3 ${{ github.action_path }}/slack_file_upload.py "${{ inputs.file-path }}" "${{ inputs.file-title }}"

name: 'Setup kcadm'
description: 'Setup Keycloak Admin CLI kcadm and add it to the PATH.'
inputs:
  version:
    description: 'Version of Keycloak'
    required: false
    default: 16.1.1
runs:
  using: "composite"
  steps:
    - name: Setup kcadm
      shell: bash
      run: |
        curl -fsSL https://github.com/keycloak/keycloak/releases/download/${KEYCLOAK_VERSION}/keycloak-${KEYCLOAK_VERSION}.tar.gz | tar xz
        mv keycloak-$KEYCLOAK_VERSION /usr/local/share/keycloak && ln -s /usr/local/share/keycloak/bin/kcadm.sh /usr/local/bin
        kcadm.sh help
      env:
        KEYCLOAK_VERSION: ${{ inputs.version }}

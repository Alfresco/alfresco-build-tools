name: "Get branch name"
description: "Get branch name from GitHub and load it as a variable to the runner env"
inputs:
  sanitize:
    description: sanitize branch name and avoid anything that isn't letters, numbers, dash
    default: "false"
    required: false
  max-length:
    description: ensure that the final branch name is no longer than specified characters
    default: "0"
    required: false
runs:
  using: composite
  steps:
    - id: get-branch-name
      uses: Alfresco/alfresco-build-tools/.github/actions/get-branch-name-v2@v15.5.0
      with:
        sanitize: ${{ inputs.sanitize }}
        max-length: ${{ inputs.max-length }}
    - name: Set env
      run: |
        echo "::warning::The get-branch-name action is DEPRECATED, move to get-branch-name-v2 and ensure you are using \`branch-name\` output instead of \$BRANCH_NAME or your build will break in a future release."
        echo "BRANCH_NAME=${{ steps.get-branch-name.outputs.branch-name }}" >> $GITHUB_ENV
      shell: bash
